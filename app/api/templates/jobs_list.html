<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Job Openings</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Urbanist:wght@300;400;600;700&display=swap');

        body {
            font-family: 'Urbanist', sans-serif;
            background-color: #fff;
            color: #333;
            margin: 0;
            padding: 0;
        }

        .container {
            width: 90%;
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            flex-wrap: wrap;
        }

        .logo-container {
            display: flex;
            align-items: center;
            flex-shrink: 0;
        }

        .pink-square {
            width: 12px;
            height: 12px;
            transform: rotate(26.653deg);
            background: #FCDDEC;
            margin-right: 8px;
        }

        .circle {
            width: 12px;
            height: 12px;
            flex-shrink: 0;
            fill: #7879F1;
            margin-right: 8px;
        }

        .logo-text {
            color: #150F6B;
            font-family: 'Urbanist', sans-serif;
            font-size: 24px;
            font-style: normal;
            font-weight: 600;
            line-height: normal;
        }

        .search-container {
            display: flex;
            align-items: center;
            color: #727171;
            font-size: 18px;
            margin-left: 30px;
            width: 100%;
            max-width: 500px;
        }

        .search-icon {
            width: 13px;
            height: 13px;
            stroke-width: 2px;
            stroke: #727171;
            margin-right: 10px;
        }

        .search-wrapper {
            display: flex;
            flex-direction: column;
            position: relative;
            flex-grow: 1;
        }

        .search-input {
            border: none;
            outline: none;
            font-size: 18px;
            color: #727171;
            background-color: transparent;
            flex: 1;
            padding: 5px 0;
            border-bottom: 1px solid #727171;
        }

        .search-line {
            width: 275px;
            height: 1px;
            background: #727171;
        }

        .create-job-btn {
            display: flex;
            width: 283px;
            height: 43px;
            padding: 10px 20px;
            justify-content: center;
            align-items: center;
            gap: 8px;
            flex-shrink: 0;
            border-radius: 13px;
            border: 1px solid #7879F1;
            background: #FFF;
            color: #7879F1;
            font-family: 'Urbanist', sans-serif;
            font-size: 18px;
            font-style: normal;
            font-weight: 600;
            line-height: normal;
            cursor: pointer;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        .create-job-btn svg {
            width: 20px;
            height: 20px;
            flex-shrink: 0;
        }

        .header-line {
            width: 100%;
            height: 1px;
            background: #7879F1;
            margin: 20px 0;
        }

        .table-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .table-row {
            display: flex;
            width: 100%;
            align-items: center;
            gap: 20px;
            padding-top: 25px;
            padding-bottom: 25px;
            position: relative;
        }

        .column-1 {
            width: 120px;
            flex-shrink: 0;
            color: #000;
            text-align: left;
            font-family: 'Urbanist', sans-serif;
            font-size: 16px;
            font-style: normal;
            font-weight: 700;
            line-height: normal;
        }

        .column-2 {
            width: 100px;
            flex-shrink: 0;
            color: #000;
            font-family: 'Urbanist', sans-serif;
            font-size: 16px;
            font-style: normal;
            font-weight: 400;
            line-height: normal;
        }

        .column-3 {
            width: 120px;
            flex-shrink: 0;
            color: #000;
            font-family: 'Urbanist', sans-serif;
            font-size: 16px;
            font-style: normal;
            font-weight: 400;
            line-height: normal;
        }

        .column-4 {
            display: flex;
            width: 130px;
            height: 25px;
            justify-content: center;
            align-items: center;
            gap: 8px;
            flex-shrink: 0;
            border-radius: 15px;
            background: #7879F1;
            color: #fff;
            font-family: 'Urbanist', sans-serif;
            font-size: 14px;
            font-style: normal;
            font-weight: 400;
            line-height: normal;
        }

        .column-5 {
            width: 220px;
            flex-shrink: 0;
            color: #EF5DA8;
            font-family: 'Urbanist', sans-serif;
            font-size: 16px;
            font-style: normal;
            font-weight: 600;
            line-height: normal;
            text-decoration: underline;
            margin-left: 15px;
        }

        .column-6 {
            width: 22px;
            height: 22px;
            flex-shrink: 0;
        }

        .column-6 svg {
            width: 100%;
            height: 100%;
            cursor: pointer;
        }

        /* Hidden div styling */
        .hidden-div {
            display: none;
            width: 100%;
            height: auto;
            flex-shrink: 0;
            border-radius: 0px 0px 15px 15px;
            background: #F4F4FF;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .expanded-row {
            position: relative;
            padding-bottom: 20px;
        }

        .expanded-row .table-row {
            border-bottom: none;
            padding-bottom: 0;
        }

        /* Icon that toggles hidden div */
        .expanded-row .column-6 svg {
            transform: rotate(44.986deg);
            opacity: 0.9;
            stroke: black;
        }

        .expanded-row::after {
            display: none;
        }

        .hidden-div .top-line {
            display: flex;
            align-items: center;
            gap: 20px;
            flex-grow: 1;
        }

        .hidden-div .additional-info {
            display: flex;
            flex-direction: row;
            gap: 15px;
            justify-content: flex-start;
            flex-wrap: wrap;
            flex-grow: 1;
            max-width: 70%;
        }

        .hidden-div .additional-info a {
            color: #EF5DA8;
            font-family: 'Urbanist', sans-serif;
            font-size: 15px;
            font-style: normal;
            font-weight: 700;
            line-height: normal;
            text-decoration: underline;
        }

        .hidden-div .additional-info span {
            color: #150F6B;
            font-family: 'Urbanist', sans-serif;
            font-size: 15px;
            font-style: normal;
            font-weight: 400;
            line-height: normal;
        }

        .button-container {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            gap: 10px;
            margin-left: auto;
        }

        .edit-btn,
        .delete-btn {
            display: flex;
            width: 186px;
            height: 39px;
            justify-content: center;
            align-items: center;
            gap: 10.05px;
            flex-shrink: 0;
            border-radius: 13.705px;
            border: 0.914px solid #EF5DA8;
            background: rgba(0, 0, 0, 0.00);
            font-family: 'Urbanist', sans-serif;
            font-size: 14px;
            font-weight: 600;
            color: #EF5DA8;
            cursor: pointer;
        }

        .edit-btn svg,
        .delete-btn svg {
            width: 19px;
            height: 19px;
            flex-shrink: 0;
        }

        .delete-btn svg {
            width: 21px;
            height: 21px;
        }

        @media (max-width: 768px) {
            header {
                flex-direction: column;
                align-items: flex-start;
            }

            .search-container {
                margin-top: 10px;
                max-width: 100%;
                margin-left: 0;
            }

            .create-job-btn {
                margin-top: 20px;
                width: 100%;
                max-width: 283px;
                justify-content: center;
            }

            .table-row {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }

            .table-row .column-1,
            .table-row .column-2,
            .table-row .column-3,
            .table-row .column-4,
            .table-row .column-5,
            .table-row .column-6 {
                width: 100%;
                max-width: 100%;
                gap: 10px;
            }

            .hidden-div {
                flex-direction: column;
            }

            .hidden-div .top-line,
            .hidden-div .additional-info {
                flex-direction: column;
                gap: 8px;
                max-width: 100%;
            }

            .button-container {
                flex-direction: row;
                gap: 5px;
                justify-content: flex-start;
                width: 100%;
            }
        }
    </style>
</head>

<body>
{% include 'nav.html' %}
    <div class="container">

        <header>
            <div class="logo-container">
                <div class="pink-square"></div>
                <svg class="circle" xmlns="http://www.w3.org/2000/svg" width="13" height="14" viewBox="0 0 13 14" fill="none">
                    <circle cx="6.59417" cy="6.9013" r="6.40583" transform="rotate(-180 6.59417 6.9013)" fill="#7879F1" />
                </svg>
                <div class="logo-text">Job openings</div>
            </div>
            <div class="search-container">
                <svg class="search-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19 19" fill="none">
                    <path d="M14.3269 14.44L17.8 17.8M16.68 8.84C16.68 13.1699 13.1699 16.68 8.84 16.68C4.51009 16.68 1 13.1699 1 8.84C1 4.51009 4.51009 1 8.84 1C13.1699 1 16.68 4.51009 16.68 8.84Z" stroke="#727171" stroke-width="2" stroke-linecap="round" />
                </svg>
                <div class="search-wrapper">
                    <input type="text" class="search-input" placeholder="Search jobs">
                    <div class="search-line"></div>
                </div>
            </div>
            <button class="create-job-btn">
                <svg xmlns="http://www.w3.org/2000/svg" width="23" height="23" viewBox="0 0 23 23" fill="none">
                    <path d="M12.3883 7.38842C12.3883 6.88381 11.9792 6.47474 11.4746 6.47474C10.97 6.47474 10.5609 6.88381 10.5609 7.38842H12.3883ZM10.5609 15.6115C10.5609 16.1162 10.97 16.5252 11.4746 16.5252C11.9792 16.5252 12.3883 16.1162 12.3883 15.6115H10.5609ZM15.5862 12.4137C16.0908 12.4137 16.4998 12.0046 16.4998 11.5C16.4998 10.9954 16.0908 10.5863 15.5862 10.5863V12.4137ZM7.36303 10.5863C6.85842 10.5863 6.44935 10.9954 6.44935 11.5C6.44935 12.0046 6.85842 12.4137 7.36303 12.4137V10.5863ZM18.784 11.5C18.784 15.5369 15.5115 18.8094 11.4746 18.8094V20.6368C16.5207 20.6368 20.6114 16.5461 20.6114 11.5H18.784ZM11.4746 18.8094C7.4377 18.8094 4.16515 15.5369 4.16515 11.5H2.33778C2.33778 16.5461 6.42847 20.6368 11.4746 20.6368V18.8094ZM4.16515 11.5C4.16515 7.46309 7.4377 4.19054 11.4746 4.19054V2.36317C6.42847 2.36317 2.33778 6.45386 2.33778 11.5H4.16515ZM11.4746 4.19054C15.5115 4.19054 18.784 7.46309 18.784 11.5H20.6114C20.6114 6.45386 16.5207 2.36317 11.4746 2.36317V4.19054ZM10.5609 7.38842L10.5609 11.5H12.3883L12.3883 7.38842H10.5609ZM10.5609 11.5V15.6115H12.3883V11.5H10.5609ZM15.5862 10.5863H11.4746V12.4137H15.5862V10.5863ZM11.4746 10.5863H7.36303V12.4137H11.4746V10.5863Z" fill="#7879F1" />
                </svg>
                Create new job opening
            </button>
        </header>
        <div class="header-line"></div>
        <div class="table-container">
            {% for job in jobs %}
            <div class="table-row">
                <div class="column-1">{{ job.job_title }}</div>
                <div class="column-2">{{ job.job_number }}</div>
                <div class="column-3">{{ job.matches }} matches</div>
                <div class="column-4">Active</div>
                <a href="#" class="column-5">Upload resume to role</a>
                <div class="column-6" onclick="toggleDetails(this)">
                    <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 22 22" fill="none">
                        <path d="M11.0198 6.85407L11.0198 10.7916M11.0198 10.7916V14.729M11.0198 10.7916H14.9573M11.0198 10.7916H7.08228M18.8948 5.8697L18.8948 15.7135C18.8948 17.3444 17.5726 18.6666 15.9416 18.6666H6.0979C4.46693 18.6666 3.14478 17.3444 3.14478 15.7135V5.8697C3.14478 4.23875 4.46693 2.9166 6.0979 2.9166H15.9417C17.5726 2.9166 18.8948 4.23875 18.8948 5.8697Z" stroke="#7879F1" stroke-width="1.75" stroke-linecap="round" />
                    </svg>
                </div>
            </div>
            <div class="hidden-div">
                <div class="top-line">
                    <div class="column-1">{{ job.job_title }}</div>
                    <div class="column-2">{{ job.job_number }}</div>
                    <div class="column-3">{{ job.matches }} matches</div>
                    <div class="column-4">Active</div>
                </div>
                <div class="additional-info">
                    <span><strong>Job title:</strong> {{ job.job_title }}</span>
                    <span><strong>Job number:</strong> {{ job.job_number }}</span>
                    <span><strong>Description:</strong> {{ job.job_description|safe }}</span>
                    <span><strong>Requirements:</strong> {{ job.requirements }}</span>
                    <span><strong>Opening valid date:</strong> {{ job.valid_date }}</span>
                </div>
                <div class="button-container">
                    <button class="edit-btn">
                        <svg xmlns="http://www.w3.org/2000/svg" width="19" height="19" viewBox="0 0 19 19" fill="none">
                            <path d="M11.3247 15.4783H15.8247M4.12476 15.4783L7.39924 14.7819C7.57308 14.7449 7.73269 14.6545 7.85804 14.5221L15.1883 6.7804C15.5397 6.40922 15.5395 5.80757 15.1878 5.4367L13.635 3.79948C13.2834 3.42876 12.7137 3.42902 12.3623 3.80004L5.03133 11.5426C4.90622 11.6747 4.82079 11.8429 4.78573 12.026L4.12476 15.4783Z" stroke="#EF5DA8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                        </svg>
                        Edit job details
                    </button>
                    <button class="delete-btn">
                        <svg xmlns="http://www.w3.org/2000/svg" width="21" height="21" viewBox="0 0 21 21" fill="none">
                            <path d="M3.7915 5.63492H17.1584M7.96865 2.9812H12.9812M13.3989 18.0189H7.55093C6.62814 18.0189 5.88008 17.2268 5.88008 16.2498L5.49862 6.55631C5.47884 6.05377 5.85828 5.63492 6.33332 5.63492H14.6165C15.0916 5.63492 15.471 6.05377 15.4512 6.55631L15.0698 16.2498C15.0698 17.2268 14.3217 18.0189 13.3989 18.0189Z" stroke="#EF5DA8" stroke-width="1.67086" stroke-linecap="round" />
                        </svg>
                        Delete job
                    </button>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>

    <script>
        // Initial hide of hidden-div
        document.addEventListener("DOMContentLoaded", function() {
            const hiddenDivs = document.querySelectorAll('.hidden-div');
            hiddenDivs.forEach(div => {
                div.style.display = 'none';
            });
        });

        function toggleDetails(iconElement) {
            const hiddenDiv = iconElement.closest('.table-row').nextElementSibling;
            const isHidden = hiddenDiv.style.display === 'none' || hiddenDiv.style.display === '';
            const svg = iconElement.querySelector('svg');

            if (isHidden) {
                hiddenDiv.style.display = 'flex';
                svg.outerHTML = `
                <svg xmlns="http://www.w3.org/2000/svg" width="35" height="34" viewBox="0 0 35 34" fill="none">
                    <g opacity="0.9">
                        <path d="M12.7176 16.9717L22.2636 16.9694M11.1282 23.3361C7.61261 19.8222 7.6112 14.1237 11.1251 10.6082C14.6389 7.09257 20.3374 7.09117 23.853 10.605C27.3686 14.1189 27.37 19.8174 23.8561 23.3329C20.3423 26.8485 14.6438 26.8499 11.1282 23.3361Z" stroke="black" stroke-width="2" stroke-linecap="round" />
                    </g>
                </svg>`;
            } else {
                hiddenDiv.style.display = 'none';
                svg.outerHTML = `
                <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 22 22" fill="none">
                    <path d="M11.0198 6.85407L11.0198 10.7916M11.0198 10.7916V14.729M11.0198 10.7916H14.9573M11.0198 10.7916H7.08228M18.8948 5.8697L18.8948 15.7135C18.8948 17.3444 17.5726 18.6666 15.9416 18.6666H6.0979C4.46693 18.6666 3.14478 17.3444 3.14478 15.7135V5.8697C3.14478 4.23875 4.46693 2.9166 6.0979 2.9166H15.9417C17.5726 2.9166 18.8948 4.23875 18.8948 5.8697Z" stroke="#7879F1" stroke-width="1.75" stroke-linecap="round" />
                </svg>`;
            }
        }
    </script>
</body>

</html>
